<?php
//====================================================================
//====================================================================
//====================================================================
//!
//! @file    logout.php
//! @brief   ログアウト
//! @author  木屋 善夫
//! @date    2012-12-16
//! @version $Revision: $
//!
//! Copyright (C) 2012 Yoshio Kiya  All rights reserved.
//!
//====================================================================
//====================================================================
//====================================================================

//====================================================================
//! コントローラー
//====================================================================
class CLogoutCtrl extends CKyaCtrlHttp
{
	//================================================================
	/**
	 * 構築
	 * @access    public
	*/
	//================================================================
	public function __construct( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::__construct( );
	}

	//================================================================
	/**
	 * 消滅
	 * @access    public
	*/
	//================================================================
	public function __destruct( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::__destruct( );
	}

	//================================================================
	// アトリビュート(定数)
	//================================================================

	//================================================================
	// アトリビュート(変数)
	//================================================================

	//================================================================
	/**
	 * 初期化
	 * @access    public
	 * @retval    FALSE エラー
	*/
	//================================================================
	public function blInit( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		if ( !parent::blInit( ) )
			return FALSE;

		//============================================================
		return TRUE;
	}

	//================================================================
	/**
	 * 処理
	 * @access    public
 	*/
	//================================================================
	public function Run( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::Run( );

		$objApp = objGetApp( );
		if ( $objApp->m_iLoginLevel > 0 )
		{
			$objApp->m_iLoginLevel = 0;
			$objApp->m_rowUser = array( );
		}

		//============================================================
		$objApp->SessionDestroy( );

		//============================================================
		$objApp->SessionOpen( );

		//============================================================
		$this->blOnGoto( 'top' );
	}

	//================================================================
	/**
	 * SUBMITボタンを押した処理
	 * @access    public
	 * @param     String  $strValue $_REQUEST['SUBMIT'] の値
	 * @return    TRUE    残りのコマンドを処理しない
 	*/
	//================================================================
	public function blOnSubmit( $strValue )
	{
	}
}

//====================================================================
//! ドキュメント
//====================================================================
class CLogoutDoc extends CKyaDocHttp
{
	//================================================================
	/**
	 * 構築
	 * @access    public
	*/
	//================================================================
	public function __construct( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::__construct( );

		//=== タイトルの設定 =========================================
		mixSetConfig( 'PAGE_TITLE', 'ログアウト' );
	}

	//================================================================
	/**
	 * 消滅
	 * @access    public
	*/
	//================================================================
	public function __destruct( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::__destruct( );
	}

	//================================================================
	// アトリビュート(定数)
	//================================================================

	//================================================================
	// アトリビュート(変数)
	//================================================================

	//================================================================
	/**
	 * 初期化
	 * @access    public
	 * @retval    FALSE エラー
	*/
	//================================================================
	public function blInit( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		if ( !parent::blInit( ) )
			return FALSE;

		//============================================================
		return TRUE;
	}

	//================================================================
	/**
	 * 処理
	 * @access    public
 	*/
	//================================================================
	public function Run( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::Run( );
	}
}

//====================================================================
//! ヴュー
//====================================================================
class CLogoutView extends CKyaViewHttp
{
	//================================================================
	/**
	 * 構築
	 * @access    public
	*/
	//================================================================
	public function __construct( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::__construct( );

//		//=== HTML ファイル名の設定 ==================================
//		$strDir  = dirname( realpath( $_SERVER['SCRIPT_FILENAME'] ) );
//		mixSetConfig( 'FRAME_HTML', "{$strDir}/frame.html" );
//
//		$strName = objGetApp()->m_strTask;
//		mixSetConfig( 'HTML_FILE' , "{$strDir}/{$strName}.html" );
	}

	//================================================================
	/**
	 * 消滅
	 * @access    public
	*/
	//================================================================
	public function __destruct( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::__destruct( );
	}

	//================================================================
	// アトリビュート(定数)
	//================================================================

	//================================================================
	// アトリビュート(変数)
	//================================================================

	//================================================================
	/**
	 * 初期化
	 * @access    public
	 * @retval    FALSE エラー
	*/
	//================================================================
	public function blInit( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		if ( !parent::blInit( ) )
			return FALSE;

		//============================================================
		return TRUE;
	}

	//================================================================
	/**
	 * 処理
	 * @access    public
 	*/
	//================================================================
	public function Run( )
	{
		//=== デフォルトインプリメンテーションの呼び出し =============
		parent::Run( );
	}
}

?>